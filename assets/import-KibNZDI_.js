import{aE as he,aF as ae,ag as f,aG as ye,aH as G,aI as ve,aJ as Z,aK as ce,aL as pe,aM as be,aN as $e,aO as N,aP as ge,aQ as me,aR as Ke,aS as _,aT as Se,$ as ee,aU as z,aV as we,aW as xe,aX as q,aY as Ee}from"./index-smBxwdoS.js";var We=(...l)=>{let e=" ";for(const t of l)if(typeof t=="string"&&t.length>0){e=t;break}return e};function J(l){return ge()?l.altKey:l.ctrlKey}function R(l){return me()?l.metaKey:l.ctrlKey}const Ie=1e3;function Fe(l){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:i}=l,s=f.useRef({search:"",timeout:null}).current,n=c=>{let u=Me(c.key);if(!u||c.ctrlKey||c.metaKey||!c.currentTarget.contains(c.target))return;u===" "&&s.search.trim().length>0&&(c.preventDefault(),"continuePropagation"in c||c.stopPropagation()),s.search+=u;let o=e.getKeyForSearch(s.search,t.focusedKey);o==null&&(o=e.getKeyForSearch(s.search)),o!=null&&(t.setFocusedKey(o),i&&i(o)),clearTimeout(s.timeout),s.timeout=setTimeout(()=>{s.search=""},Ie)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?n:null}}}function Me(l){return l.length===1||!/^[A-Z]/i.test(l)?l:""}function qe(l){let{selectionManager:e,keyboardDelegate:t,ref:i,autoFocus:s=!1,shouldFocusWrap:n=!1,disallowEmptySelection:c=!1,disallowSelectAll:u=!1,selectOnFocus:o=e.selectionBehavior==="replace",disallowTypeAhead:h=!1,shouldUseVirtualFocus:v,allowsTabNavigation:$=!1,isVirtualized:b,scrollRef:y=i,linkBehavior:M="action"}=l,{direction:S}=he(),p=ae(),E=r=>{if(r.altKey&&r.key==="Tab"&&r.preventDefault(),!i.current.contains(r.target))return;const g=(d,k)=>{if(d!=null){if(e.isLink(d)&&M==="selection"&&o&&!J(r)){Se.flushSync(()=>{e.setFocusedKey(d,k)});let B=y.current.querySelector(`[data-key="${d}"]`);p.open(B,r);return}if(e.setFocusedKey(d,k),e.isLink(d)&&M==="override")return;r.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(d):o&&!J(r)&&e.replaceSelection(d)}};switch(r.key){case"ArrowDown":if(t.getKeyBelow){var D,x;r.preventDefault();let d=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(D=t.getFirstKey)===null||D===void 0?void 0:D.call(t);d==null&&n&&(d=(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t,e.focusedKey)),g(d)}break;case"ArrowUp":if(t.getKeyAbove){var P,C;r.preventDefault();let d=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(P=t.getLastKey)===null||P===void 0?void 0:P.call(t);d==null&&n&&(d=(C=t.getLastKey)===null||C===void 0?void 0:C.call(t,e.focusedKey)),g(d)}break;case"ArrowLeft":if(t.getKeyLeftOf){var O,a;r.preventDefault();let d=t.getKeyLeftOf(e.focusedKey);d==null&&n&&(d=S==="rtl"?(O=t.getFirstKey)===null||O===void 0?void 0:O.call(t,e.focusedKey):(a=t.getLastKey)===null||a===void 0?void 0:a.call(t,e.focusedKey)),g(d,S==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var j,W;r.preventDefault();let d=t.getKeyRightOf(e.focusedKey);d==null&&n&&(d=S==="rtl"?(j=t.getLastKey)===null||j===void 0?void 0:j.call(t,e.focusedKey):(W=t.getFirstKey)===null||W===void 0?void 0:W.call(t,e.focusedKey)),g(d,S==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){r.preventDefault();let d=t.getFirstKey(e.focusedKey,R(r));e.setFocusedKey(d),R(r)&&r.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(d):o&&e.replaceSelection(d)}break;case"End":if(t.getLastKey){r.preventDefault();let d=t.getLastKey(e.focusedKey,R(r));e.setFocusedKey(d),R(r)&&r.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(d):o&&e.replaceSelection(d)}break;case"PageDown":if(t.getKeyPageBelow){r.preventDefault();let d=t.getKeyPageBelow(e.focusedKey);g(d)}break;case"PageUp":if(t.getKeyPageAbove){r.preventDefault();let d=t.getKeyPageAbove(e.focusedKey);g(d)}break;case"a":R(r)&&e.selectionMode==="multiple"&&u!==!0&&(r.preventDefault(),e.selectAll());break;case"Escape":r.preventDefault(),c||e.clearSelection();break;case"Tab":if(!$){if(r.shiftKey)i.current.focus();else{let d=Ke(i.current,{tabbable:!0}),k,B;do B=d.lastChild(),B&&(k=B);while(B);k&&!k.contains(document.activeElement)&&_(k)}break}}},m=f.useRef({top:0,left:0});ye(y,"scroll",b?null:()=>{m.current={top:y.current.scrollTop,left:y.current.scrollLeft}});let K=r=>{if(e.isFocused){r.currentTarget.contains(r.target)||e.setFocused(!1);return}if(r.currentTarget.contains(r.target)){if(e.setFocused(!0),e.focusedKey==null){let x=C=>{C!=null&&(e.setFocusedKey(C),o&&e.replaceSelection(C))},P=r.relatedTarget;var g,D;P&&r.currentTarget.compareDocumentPosition(P)&Node.DOCUMENT_POSITION_FOLLOWING?x((g=e.lastSelectedKey)!==null&&g!==void 0?g:t.getLastKey()):x((D=e.firstSelectedKey)!==null&&D!==void 0?D:t.getFirstKey())}else b||(y.current.scrollTop=m.current.top,y.current.scrollLeft=m.current.left);if(!b&&e.focusedKey!=null){let x=y.current.querySelector(`[data-key="${e.focusedKey}"]`);x&&(x.contains(document.activeElement)||_(x),N()==="keyboard"&&Z(x,{containingElement:i.current}))}}},w=r=>{r.currentTarget.contains(r.relatedTarget)||e.setFocused(!1)};const V=f.useRef(s);f.useEffect(()=>{if(V.current){let r=null;s==="first"&&(r=t.getFirstKey()),s==="last"&&(r=t.getLastKey());let g=e.selectedKeys;g.size&&(r=g.values().next().value),e.setFocused(!0),e.setFocusedKey(r),r==null&&!v&&G(i.current)}V.current=!1},[]);let A=f.useRef(e.focusedKey);f.useEffect(()=>{let r=N();if(e.isFocused&&e.focusedKey!=null&&(y!=null&&y.current)){let g=y.current.querySelector(`[data-key="${e.focusedKey}"]`);g&&r==="keyboard"&&(b||ve(y.current,g),Z(g,{containingElement:i.current}))}e.isFocused&&e.focusedKey==null&&A.current!=null&&G(i.current),A.current=e.focusedKey},[b,y,e.focusedKey,e.isFocused,i]);let I={onKeyDown:E,onFocus:K,onBlur:w,onMouseDown(r){y.current===r.target&&r.preventDefault()}},{typeSelectProps:L}=Fe({keyboardDelegate:t,selectionManager:e});h||(I=ce(L,I));let T;return v||(T=e.focusedKey==null?0:-1),{collectionProps:{...I,tabIndex:T}}}function He(l){let{selectionManager:e,key:t,ref:i,shouldSelectOnPressUp:s,shouldUseVirtualFocus:n,focus:c,isDisabled:u,onAction:o,allowsDifferentPressOrigin:h,linkBehavior:v="action"}=l,$=ae(),b=a=>{if(a.pointerType==="keyboard"&&J(a))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(v==="selection"){$.open(i.current,a),e.setSelectedKeys(e.selectedKeys);return}else if(v==="override"||v==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):a&&a.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||a&&(R(a)||a.pointerType==="touch"||a.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};f.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!n&&(c?c():document.activeElement!==i.current&&G(i.current))},[i,t,e.focusedKey,e.childFocusStrategy,e.isFocused,n]),u=u||e.isDisabled(t);let y={};!n&&!u?y={tabIndex:t===e.focusedKey?0:-1,onFocus(a){a.target===i.current&&e.setFocusedKey(t)}}:u&&(y.onMouseDown=a=>{a.preventDefault()});let M=e.isLink(t)&&v==="override",S=e.isLink(t)&&v!=="selection"&&v!=="none",p=!u&&e.canSelectItem(t)&&!M,E=(o||S)&&!u,m=E&&(e.selectionBehavior==="replace"?!p:!p||e.isEmpty),K=E&&p&&e.selectionBehavior==="replace",w=m||K,V=f.useRef(null),A=w&&p,I=f.useRef(!1),L=f.useRef(!1),T=a=>{o&&o(),S&&$.open(i.current,a)},r={};s?(r.onPressStart=a=>{V.current=a.pointerType,I.current=A,a.pointerType==="keyboard"&&(!w||le())&&b(a)},h?(r.onPressUp=m?null:a=>{a.pointerType!=="keyboard"&&p&&b(a)},r.onPress=m?T:null):r.onPress=a=>{if(m||K&&a.pointerType!=="mouse"){if(a.pointerType==="keyboard"&&!te())return;T(a)}else a.pointerType!=="keyboard"&&p&&b(a)}):(r.onPressStart=a=>{V.current=a.pointerType,I.current=A,L.current=m,p&&(a.pointerType==="mouse"&&!m||a.pointerType==="keyboard"&&(!E||le()))&&b(a)},r.onPress=a=>{(a.pointerType==="touch"||a.pointerType==="pen"||a.pointerType==="virtual"||a.pointerType==="keyboard"&&w&&te()||a.pointerType==="mouse"&&L.current)&&(w?T(a):p&&b(a))}),y["data-key"]=t,r.preventFocusOnPress=n;let{pressProps:g,isPressed:D}=pe(r),x=K?a=>{V.current==="mouse"&&(a.stopPropagation(),a.preventDefault(),T(a))}:void 0,{longPressProps:P}=be({isDisabled:!A,onLongPress(a){a.pointerType==="touch"&&(b(a),e.setSelectionBehavior("toggle"))}}),C=a=>{V.current==="touch"&&I.current&&a.preventDefault()},O=e.isLink(t)?a=>{$e.isOpening||a.preventDefault()}:void 0;return{itemProps:ce(y,p||m?g:{},A?P:{},{onDoubleClick:x,onDragStartCapture:C,onClick:O}),isPressed:D,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:u,allowsSelection:p,hasAction:w}}function te(){let l=window.event;return(l==null?void 0:l.key)==="Enter"}function le(){let l=window.event;return(l==null?void 0:l.key)===" "||(l==null?void 0:l.code)==="Space"}var Qe=l=>ee.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...l,children:ee.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})});function ue(l){return null}ue.getCollectionNode=function*(e,t){let{childItems:i,title:s,children:n}=e,c=e.title||e.children,u=e.textValue||(typeof c=="string"?c:"")||e["aria-label"]||"";!u&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:c,textValue:u,"aria-label":e["aria-label"],hasChildNodes:Ve(e),*childNodes(){if(i)for(let o of i)yield{type:"item",value:o};else if(s){let o=[];z.Children.forEach(n,h=>{o.push({type:"item",element:h})}),yield*o}}}};function Ve(l){return l.hasChildItems!=null?l.hasChildItems:!!(l.childItems||l.title&&z.Children.count(l.children)>0)}let Ye=ue;class Ae{build(e,t){return this.context=t,ie(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:i}=e;if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];z.Children.forEach(t,c=>{s.push(c)});let n=0;for(let c of s){let u=this.getFullNode({element:c,index:n},{});for(let o of u)n++,yield o}}}getKey(e,t,i,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let n=t.value;if(n!=null){var c;let u=(c=n.key)!==null&&c!==void 0?c:n.id;if(u==null)throw new Error("No key found for item");return u}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,i,s){let n=e.element;if(!n&&e.value&&t&&t.renderer){let o=this.cache.get(e.value);if(o&&(!o.shouldInvalidate||!o.shouldInvalidate(this.context))){o.index=e.index,o.parentKey=s?s.key:null,yield o;return}n=t.renderer(e.value)}if(z.isValidElement(n)){let o=n.type;if(typeof o!="function"&&typeof o.getCollectionNode!="function"){let b=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${b}> in collection.`)}let h=o.getCollectionNode(n.props,this.context),v=e.index,$=h.next();for(;!$.done&&$.value;){let b=$.value;e.index=v;let y=b.key;y||(y=b.element?null:this.getKey(n,e,t,i));let S=[...this.getFullNode({...b,key:y,index:v,wrapper:De(e.wrapper,b.wrapper)},this.getChildState(t,b),i?`${i}${n.key}`:n.key,s)];for(let p of S){if(p.value=b.value||e.value,p.value&&this.cache.set(p.value,p),e.type&&p.type!==e.type)throw new Error(`Unsupported type <${H(p.type)}> in <${H(s.type)}>. Only <${H(e.type)}> is supported.`);v++,yield p}$=h.next(S)}return}if(e.key==null)return;let c=this,u={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:ie(function*(){if(!e.hasChildNodes)return;let o=0;for(let h of e.childNodes()){h.key!=null&&(h.key=`${u.key}${h.key}`),h.index=o;let v=c.getFullNode(h,c.getChildState(t,h),u.key,u);for(let $ of v)o++,yield $}})};yield u}constructor(){this.cache=new WeakMap}}function ie(l){let e=[],t=null;return{*[Symbol.iterator](){for(let i of e)yield i;t||(t=l());for(let i of t)e.push(i),yield i}}}function De(l,e){if(l&&e)return t=>l(e(t));if(l)return l;if(e)return e}function H(l){return l[0].toUpperCase()+l.slice(1)}function Ge(l,e,t){let i=f.useMemo(()=>new Ae,[]),{children:s,items:n,collection:c}=l;return f.useMemo(()=>{if(c)return c;let o=i.build({children:s,items:n},t);return e(o)},[i,s,n,c,t,e])}function Pe(l,e){return typeof e.getChildren=="function"?e.getChildren(l.key):l.childNodes}function Ce(l){return Te(l,0)}function Te(l,e){if(e<0)return;let t=0;for(let i of l){if(t===e)return i;t++}}function Je(l){let e;for(let t of l)e=t;return e}function Q(l,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let i=[...se(l,e),e],s=[...se(l,t),t],n=i.slice(0,s.length).findIndex((c,u)=>c!==s[u]);return n!==-1?(e=i[n],t=s[n],e.index-t.index):i.findIndex(c=>c===t)>=0?1:(s.findIndex(c=>c===e)>=0,-1)}function se(l,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=l.getItem(e.parentKey),t.unshift(e);return t}class F extends Set{constructor(e,t,i){super(e),e instanceof F?(this.anchorKey=t||e.anchorKey,this.currentKey=i||e.currentKey):(this.anchorKey=t,this.currentKey=i)}}function ke(l,e){if(l.size!==e.size)return!1;for(let t of l)if(!e.has(t))return!1;return!0}function Xe(l){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:i,selectionBehavior:s="toggle",disabledBehavior:n="all"}=l,c=f.useRef(!1),[,u]=f.useState(!1),o=f.useRef(null),h=f.useRef(null),[,v]=f.useState(null),$=f.useMemo(()=>re(l.selectedKeys),[l.selectedKeys]),b=f.useMemo(()=>re(l.defaultSelectedKeys,new F),[l.defaultSelectedKeys]),[y,M]=we($,b,l.onSelectionChange),S=f.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),[p,E]=f.useState(s);s==="replace"&&p==="toggle"&&typeof y=="object"&&y.size===0&&E("replace");let m=f.useRef(s);return f.useEffect(()=>{s!==m.current&&(E(s),m.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:p,setSelectionBehavior:E,get isFocused(){return c.current},setFocused(K){c.current=K,u(K)},get focusedKey(){return o.current},get childFocusStrategy(){return h.current},setFocusedKey(K,w="first"){o.current=K,h.current=w,v(K)},selectedKeys:y,setSelectedKeys(K){(i||!ke(K,y))&&M(K)},disabledKeys:S,disabledBehavior:n}}function re(l,e){return l?l==="all"?"all":new F(l):e}class Ze{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(i=>t.has(i)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&Q(this.collection,i,e)<0)&&(e=i)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&Q(this.collection,i,e)>0)&&(e=i)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new F([e],e,e);else{let i=this.state.selectedKeys,s=i.anchorKey||e;t=new F(i,s,e);for(let n of this.getKeyRange(s,i.currentKey||e))t.delete(n);for(let n of this.getKeyRange(e,s))this.canSelectItem(n)&&t.add(n)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let i=this.collection.getItem(e),s=this.collection.getItem(t);return i&&s?Q(this.collection,i,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let i=[],s=e;for(;s;){let n=this.collection.getItem(s);if((n&&n.type==="item"||n.type==="cell"&&this.allowsCellSelection)&&i.push(s),s===t)return i;s=this.collection.getKeyAfter(s)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new F(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new F([e],e,e):new F;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new F;for(let i of e)if(i=this.getKey(i),i!=null&&(t.add(i),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=i=>{for(;i;){if(this.canSelectItem(i)){let s=this.collection.getItem(i);s.type==="item"&&e.push(i),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(Ce(Pe(s,this.collection)).key)}i=this.collection.getKeyAfter(i)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new F)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;for(let i of t)if(!e.has(i))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}isLink(e){var t,i;return!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.href)}constructor(e,t,i){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=i==null?void 0:i.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null}}function Ne(l,e,t){let{validationBehavior:i,focus:s}=l;xe(()=>{if(i==="native"&&(t!=null&&t.current)){let o=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";t.current.setCustomValidity(o),t.current.hasAttribute("title")||(t.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(Re(t.current))}});let n=q(()=>{e.resetValidation()}),c=q(o=>{var h;e.displayValidation.isInvalid||e.commitValidation();let v=t==null||(h=t.current)===null||h===void 0?void 0:h.form;if(!o.defaultPrevented&&t&&v&&Le(v)===t.current){var $;s?s():($=t.current)===null||$===void 0||$.focus(),Ee("keyboard")}o.preventDefault()}),u=q(()=>{e.commitValidation()});f.useEffect(()=>{let o=t==null?void 0:t.current;if(!o)return;let h=o.form;return o.addEventListener("invalid",c),o.addEventListener("change",u),h==null||h.addEventListener("reset",n),()=>{o.removeEventListener("invalid",c),o.removeEventListener("change",u),h==null||h.removeEventListener("reset",n)}},[t,c,u,n,i])}function Be(l){let e=l.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function Re(l){return{isInvalid:!l.validity.valid,validationDetails:Be(l),validationErrors:l.validationMessage?[l.validationMessage]:[]}}function Le(l){for(let e=0;e<l.elements.length;e++){let t=l.elements[e];if(!t.validity.valid)return t}return null}const de={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},fe={...de,customError:!0,valid:!1},U={isInvalid:!1,validationDetails:de,validationErrors:[]},Oe=f.createContext({}),ne="__formValidationState"+Date.now();function _e(l){if(l[ne]){let{realtimeValidation:e,displayValidation:t,updateValidation:i,resetValidation:s,commitValidation:n}=l[ne];return{realtimeValidation:e,displayValidation:t,updateValidation:i,resetValidation:s,commitValidation:n}}return Ue(l)}function Ue(l){let{isInvalid:e,validationState:t,name:i,value:s,builtinValidation:n,validate:c,validationBehavior:u="aria"}=l;t&&(e||(e=t==="invalid"));let o=e?{isInvalid:!0,validationErrors:[],validationDetails:fe}:null,h=f.useMemo(()=>oe(ze(c,s)),[c,s]);n!=null&&n.validationDetails.valid&&(n=null);let v=f.useContext(Oe),$=f.useMemo(()=>i?Array.isArray(i)?i.flatMap(r=>X(v[r])):X(v[i]):[],[v,i]),[b,y]=f.useState(v),[M,S]=f.useState(!1);v!==b&&(y(v),S(!1));let p=f.useMemo(()=>oe(M?[]:$),[M,$]),E=f.useRef(U),[m,K]=f.useState(U),w=f.useRef(U),V=()=>{if(!A)return;I(!1);let r=h||n||E.current;Y(r,w.current)||(w.current=r,K(r))},[A,I]=f.useState(!1);return f.useEffect(V),{realtimeValidation:o||p||h||n||U,displayValidation:u==="native"?o||p||m:o||p||h||n||m,updateValidation(r){u==="aria"&&!Y(m,r)?K(r):E.current=r},resetValidation(){let r=U;Y(r,w.current)||(w.current=r,K(r)),u==="native"&&I(!1),S(!0)},commitValidation(){u==="native"&&I(!0),S(!0)}}}function X(l){return l?Array.isArray(l)?l:[l]:[]}function ze(l,e){if(typeof l=="function"){let t=l(e);if(t&&typeof t!="boolean")return X(t)}return[]}function oe(l){return l.length?{isInvalid:!0,validationErrors:l,validationDetails:fe}:null}function Y(l,e){return l===e?!0:l&&e&&l.isInvalid===e.isInvalid&&l.validationErrors.length===e.validationErrors.length&&l.validationErrors.every((t,i)=>t===e.validationErrors[i])&&Object.entries(l.validationDetails).every(([t,i])=>e.validationDetails[t]===i)}export{_e as $,Qe as C,Ne as a,He as b,qe as c,Xe as d,Ge as e,Ze as f,Ye as g,U as h,ne as i,Te as j,Pe as k,Je as l,Ce as m,We as s};
